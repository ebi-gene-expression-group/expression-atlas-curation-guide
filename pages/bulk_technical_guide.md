# Technical guidelines for making a bulk experiment fit for Atlas processing

### Technical replicates

There are different types of technical replicates, but the most common scenario is that we have 1 sample connected with muliple assays, 
e.g. sequencing an RNA-seq library on muliple lanes or flowcells that produce separate files and ENA runs. 
Technical replicates need to be marked explicitly as such or they will be treated as biological replicates by the pipeline. 
For this, we need to group the assays (equivalent to ENA runs for a sequencing experiment) under the "Assay Name" column by adding a Comment column 
between the `Assay Name` and `Technology Type` column, called `Comment[technical replicate group]`. If there are no technical replicates in an experiment, 
the column is _not_ added.

The values for the `Comment[technical replicate group]` must follow this pattern: "group 1", "group 2", "group 3", etc. 
Each of these groups must correlated with 1 biological replicate and span all the technical replicates that belong to this sample. 
If there are no technical replicates for an individual sample in the experiment, the column is left empty.

Below is an example, where assays "Run2" and "Run3" are grouped into a technical replicate group.
Note that paired-end files are not considered technical replicates because they belong to the same assay "Run1".

| Source Name | Assay Name | Comment[technical replicate group] | Technology Type | Scan Name |
|---|---|---|---|---|
| Sample 1 | Run1	|  | sequencing assay | Run1_R1.fq.gz |
| Sample 1 | Run1	|  | sequencing assay | Run1_R2.fq.gz |
| Sample 2 | Run2 | group 1 | sequencing assay | Run2_R1.fq.gz | 
| Sample 2 | Run3 | group 1	| sequencing assay | Run3_R1.fq.gz |
| Sample 3 | Run4	| group 2 | sequencing assay | Run4_R1.fq.gz |
| Sample 3 | Run5	| group 2 | sequencing assay | Run5_R1.fq.gz |
| Sample 4 | Run6	|  | sequencing assay | Run6_R1.fq.gz |

Also note that the values in the `Assay Name` column need to be unique for each assay, i.e. ENA run or microarray hybridisation 
(experiments straight from Annotare will use the sample name as autogenerated assay name, so this needs to be updated manually). 


### Technical sample annotations

Sometimes submitters add technical information, such as `replicate`, `sequencing batch`, `run date` etc. 
These values should not be sample characteristics or factors for Atlas experiments. 
To keep the information in the sample annotation, turn the attributes into Comments 
(`Characteristics[replicate] => Comment[replicate]`).
